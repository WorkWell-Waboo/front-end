'use client'
import { Button } from "@/components/ui/button";
import { Carousel, type CarouselApi, CarouselContent, CarouselItem } from "@/components/ui/carousel";
import { useEffect, useState } from "react";

import { Arrow } from "@/assets/svgs/arrow";
import { Group } from "@/assets/svgs/group";
import { Apple, Brain, BriefcaseBusiness, Smile } from "lucide-react";

import PhotoBlog from "@/assets/imgs/blog.png"
import PhotoQuiz from "@/assets/imgs/cliente.png"
import PhotoVideo from "@/assets/imgs/pessoas.jpeg"
import WBox from "@/components/wbox";
import Link from "next/link";


function CollaboratorContentsPage() {
	// objeto com categorias
	const menuOptions=[
		{	id:1, name:'Autoconhecimento', icon:Smile},
		{	id:2, name:'Carreira', icon:BriefcaseBusiness},
		{	id:3, name:'Nutrição', icon:Apple},
		{	id:4, name:'Familia e amigos', icon:Group},
		{	id:5, name:'Transtornos', icon:Brain},
	]
	// função click menu
	const [selectedId, setSelectedId] = useState<number | null>(null); 

  const handleSelect = (id: number) => {
    setSelectedId((prevId) => (prevId === id ? null : id));
  };

	const postBlog=[
		{	
			id:1, 
			title:' Descubra Quem Você Realmente É: Primeiros Passos do Autoconhecimento', 
			excerpt:"Autoconhecimento é a chave para tomar decisões mais conscientes e viver alinhado aos seus valores. Entenda como começar!",
			image:PhotoBlog,
		},
		{	
			id:2, 
			title:'Descubra Quem Você Realmente É: Primeiros Passos do Autoconhecimento', 
			excerpt:"Autoconhecimento é a chave para tomar decisões mais conscientes e viver alinhado aos seus valores. Entenda como começar!",
			image:PhotoBlog,
		},
		{	
			id:3, 
			title:'Descubra Quem Você Realmente É: Primeiros Passos do Autoconhecimento', 
			excerpt:"Autoconhecimento é a chave para tomar decisões mais conscientes e viver alinhado aos seus valores. Entenda como começar!",
			image:PhotoBlog,
		}
	]

	const postQuiz=[
		{	
			id:1, 
			title:"Você Se Conhece Bem o Suficiente? Teste Aqui!", 
			excerpt:"Explore aspectos únicos da sua personalidade e descubra como o autoconhecimento impacta sua rotina.",
			image:PhotoQuiz,
		},
		{	
			id:2, 
			title:"Você Se Conhece Bem o Suficiente? Teste Aqui!", 
			excerpt:"Explore aspectos únicos da sua personalidade e descubra como o autoconhecimento impacta sua rotina.",
			image:PhotoQuiz,
		},
		{	
			id:3, 
			title:"Você Se Conhece Bem o Suficiente? Teste Aqui!", 
			excerpt:"Explore aspectos únicos da sua personalidade e descubra como o autoconhecimento impacta sua rotina.",
			image:PhotoQuiz,
		}
	]

	const postVideo=[
		{	
			id:1, 
			title:'O Que É Autoconhecimento e Por Que Ele Importa?', 
			excerpt:"Descubra como entender melhor a si mesmo pode transformar sua vida em todos os aspectos!",
			image:PhotoVideo,
		},
		{	
			id:2, 
			title:'Descubra Quem Você Realmente É: Primeiros Passos do Autoconhecimento', 
			excerpt:"Autoconhecimento é a chave para tomar decisões mais conscientes e viver alinhado aos seus valores. Entenda como começar!",
			image:PhotoVideo,
		},
		{	
			id:3, 
			title:'Descubra Quem Você Realmente É: Primeiros Passos do Autoconhecimento', 
			excerpt:"Autoconhecimento é a chave para tomar decisões mais conscientes e viver alinhado aos seus valores. Entenda como começar!",
			image:PhotoVideo,
		}
	]

	// carousel blog
	const [carouselBlog, setCarouselBlog] = useState<CarouselApi>()
  const [currentCarouselBlog, setCurrentCarouselBlog] = useState(0)

	useEffect(() => {
    if (!carouselBlog) {
      return
    }

    setCurrentCarouselBlog(carouselBlog.selectedScrollSnap())
 
    carouselBlog.on("select", () => {
      setCurrentCarouselBlog(carouselBlog.selectedScrollSnap())
    })
  }, [carouselBlog])

	// carousel quiz
	const [carouselQuiz, setCarouselQuiz] = useState<CarouselApi>()
  const [currentCarouselQuiz, setCurrentCarouselQuiz] = useState(0)

	useEffect(() => {
    if (!carouselQuiz) {
      return
    }

    setCurrentCarouselQuiz(carouselQuiz.selectedScrollSnap())
 
    carouselQuiz.on("select", () => {
      setCurrentCarouselQuiz(carouselQuiz.selectedScrollSnap())
    })
  }, [carouselQuiz])

	// carousel video
	const [carouselVideo, setCarouselVideo] = useState<CarouselApi>()
	const [currentCarouselVideo, setCurrentCarouselVideo] = useState(0)

	useEffect(() => {
		if (!carouselVideo) {
			return
		}

		setCurrentCarouselVideo(carouselVideo.selectedScrollSnap())

		carouselVideo.on("select", () => {
			setCurrentCarouselVideo(carouselVideo.selectedScrollSnap())
		})
	}, [carouselVideo])

	return (
		<main className="p-10 flex flex-col gap-4">
			<div className="flex flex-col gap-4">
				<h2  className="font-semibold text-lg text-[#4f4f4f]">
					Escolha a categoria de interesse:
				</h2>
				<div className="grid grid-cols-5 gap-2 h-[150px]">
					{menuOptions.map((menuOption)=>(
						<Button
								variant="secondary"
								key={menuOption.id}
								onClick={() => handleSelect(menuOption.id)} 
								className={`flex flex-col items-center justify-center rounded-lg h-full hover:bg-primary hover:text-white font-medium ${
									menuOption.id === selectedId ? "bg-primary text-white" : "bg-white text-[#4F4F4F]"  
								}`} 
							>
							<div className="flex items-center justify-center bg-white w-11 h-11 rounded-full">
								<menuOption.icon className="w-8! h-8! text-primary"/>
							</div>
							{menuOption.name}
						</Button>
					))}
				</div>
			</div>
			{/* Materia Blog */}
			<div className="block">
				<div className="flex justify-between items-center mb-3">
					<h2 className="font-semibold text-lg text-[#4f4f4f] ">Matéria/Blog</h2>
					<Link href="/contents/blog">
						<Button variant="outline" className="border-[#BDBDBD] rounded-lg text-sm text-[#333333] hover:text-[#333333]">
							Ver mais
						</Button>
					</Link>
				</div>
				<div className="relative w-full">
					<button 
						type="button"
						className="absolute -left-2 top-1/2 transform -translate-y-1/2 z-2 bg-[#F9F3FF] w-7 h-7 flex justify-center items-center drop-shadow-md rounded-full cursor-pointer" 
						onClick={()=> carouselBlog?.scrollTo(currentCarouselBlog - 1)}
					>
						<Arrow className="text-primary w-1.5 h-2"/>
					</button>
					<button 
						type="button" 
						className="absolute -right-2 top-1/2 transform -translate-y-1/2 z-2 bg-[#F9F3FF] w-7 h-7 flex justify-center items-center drop-shadow-md rounded-full cursor-pointer" 
						onClick={()=> carouselBlog?.scrollTo(currentCarouselBlog + 1)}
					>
						<Arrow className="text-primary w-1.5 h-2 rotate-180"/>
					</button>
					<Carousel setApi={setCarouselBlog} opts={{align: "start", loop: true}}> 
						<CarouselContent >
							{postBlog.map((post) => (
								<CarouselItem className=" lg:basis-1/2"  key={post.id}>
									<WBox 
										variant="white"
										id={post.id}
										imageSrc={post.image} 
										imageAlt="foto post" 
										title={post.title} 
										text={post.excerpt} 
										link={`/contents/blog/${post.id}`}
										time="5 min"				
										buttons={["heart"]}	
									/>
								</CarouselItem>
							))}
						</CarouselContent>
					</Carousel>
				</div>
			</div>
			{/* Quiz */}
			<div className="block">
				<div className="flex justify-between items-center mb-3">
					<h2 className="font-semibold text-lg text-[#4f4f4f] ">Quiz</h2>
					<Link href="/contents/quiz">
						<Button variant="outline" className="border-[#BDBDBD] rounded-lg text-sm text-[#333333] hover:text-[#333333]">
							Ver mais
						</Button>
					</Link>
				</div>
				<div className="relative w-full">
					<button 
						type="button"
						className="absolute -left-2 top-1/2 transform -translate-y-1/2 z-2 bg-[#F9F3FF] w-7 h-7 flex justify-center items-center drop-shadow-md rounded-full cursor-pointer" 
						onClick={()=> carouselQuiz?.scrollTo(currentCarouselQuiz - 1)}
					>
						<Arrow className="text-primary w-1.5 h-2"/>
					</button>
					<button 
						type="button" 
						className="absolute -right-2 top-1/2 transform -translate-y-1/2 z-2 bg-[#F9F3FF] w-7 h-7 flex justify-center items-center drop-shadow-md rounded-full cursor-pointer" 
						onClick={()=> carouselQuiz?.scrollTo(currentCarouselQuiz + 1)}
					>
						<Arrow className="text-primary w-1.5 h-2 rotate-180"/>
					</button>
					<Carousel setApi={setCarouselQuiz} opts={{align: "start", loop: true}}> 
						<CarouselContent >
							{postQuiz.map((post) => (
								<CarouselItem className=" lg:basis-1/2"  key={post.id}>
									<WBox 
										variant="white"
										id={post.id}
										imageSrc={post.image} 
										imageAlt="foto post" 
										title={post.title} 
										text={post.excerpt} 
										link={`/contents/quiz/${post.id}`}
										time="5 min"				
										buttons={["heart"]}	
									/>
								</CarouselItem>
							))}
						</CarouselContent>
					</Carousel>
				</div>
			</div>
			{/* Videos */}
			<div className="block">
				<div className="flex justify-between items-center mb-3">
					<h2 className="font-semibold text-lg text-[#4f4f4f] ">Quiz</h2>
					<Link href="/contents/video">
						<Button variant="outline" className="border-[#BDBDBD] rounded-lg text-sm text-[#333333] hover:text-[#333333]">
							Ver mais
						</Button>
					</Link>
				</div>
				<div className="relative w-full">
					<button 
						type="button"
						className="absolute -left-2 top-1/2 transform -translate-y-1/2 z-2 bg-[#F9F3FF] w-7 h-7 flex justify-center items-center drop-shadow-md rounded-full cursor-pointer" 
						onClick={()=> carouselVideo?.scrollTo(currentCarouselVideo - 1)}
					>
						<Arrow className="text-primary w-1.5 h-2"/>
					</button>
					<button 
						type="button" 
						className="absolute -right-2 top-1/2 transform -translate-y-1/2 z-2 bg-[#F9F3FF] w-7 h-7 flex justify-center items-center drop-shadow-md rounded-full cursor-pointer" 
						onClick={()=> carouselVideo?.scrollTo(currentCarouselVideo + 1)}
					>
						<Arrow className="text-primary w-1.5 h-2 rotate-180"/>
					</button>
					<Carousel setApi={setCarouselVideo} opts={{align: "start", loop: true}}> 
						<CarouselContent >
							{postVideo.map((post) => (
								<CarouselItem className=" lg:basis-1/2"  key={post.id}>
									<WBox 
										variant="white"
										id={post.id}
										imageSrc={post.image} 
										imageAlt="foto post" 
										title={post.title} 
										text={post.excerpt} 
										link={`/contents/video/${post.id}`}
										time="5 min"				
										buttons={["heart"]}	
									/>
								</CarouselItem>
							))}
						</CarouselContent>
					</Carousel>
				</div>
			</div>	
		</main>
	);
}

export default CollaboratorContentsPage;
